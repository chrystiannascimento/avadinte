define(["jquery","core/custom_interaction_events","core/log","core/pubsub"],function(s,a,e,o){function t(){s(l.TOGGLE_REGION).length||e.debug("Page is missing a block region"),s(l.TOGGLE_ACTION).length||e.debug("Page is missing a blockregion toggle link"),s(l.TOGGLE_REGION).each(function(e,t){var a=s(t).find(l.TOGGLE_ACTION),r=a.attr("aria-controls"),n=s(document.getElementById(r)),i="false"==a.attr("aria-expanded"),o=a.attr("data-side"),t=s(l.BODY),r=a.attr("data-preference");d&&M.util.set_user_preference(r,"false"),n.on("mousewheel DOMMouseScroll",this.preventPageScroll),i?a.attr("aria-expanded","false"):(t.addClass("drawer-open-"+o),a.attr("aria-expanded","true"))}.bind(this)),this.registerEventListeners(),d&&this.closeAll()}var l={TOGGLE_REGION:'[data-region="blockregion-toggle"]',TOGGLE_ACTION:'[data-action="toggle-blockregion"]',TOGGLE_TARGET:"aria-controls",TOGGLE_SIDE:"right",BODY:"body",DRAWER:"#blockregion"},d=s(document).width()<768;return t.prototype.closeAll=function(){s(l.TOGGLE_REGION).each(function(e,t){var a=s(t).find(l.TOGGLE_ACTION),r=a.attr("data-side"),n=s(l.BODY),i=a.attr("aria-controls"),t=s(document.getElementById(i)),i=a.attr("data-preference");a.attr("aria-expanded","false"),n.removeClass("drawer-open-"+r),t.attr("aria-hidden","true"),t.addClass("closed"),d||M.util.set_user_preference(i,"false")})},t.prototype.toggleDrawer=function(e){var t=s(e.target).closest("[data-action=toggle-drawer]"),a=t.attr("aria-controls"),r=s(document.getElementById(a)),n=s(l.BODY),i=t.attr("data-side"),e=t.attr("data-preference");d&&M.util.set_user_preference(e,"false"),n.addClass("drawer-ease");a="true"==t.attr("aria-expanded");a?(n.removeClass("drawer-open-"+i),t.attr("aria-expanded","false"),r.addClass("closed").delay(500).queue(function(){s(this).attr("aria-hidden","true").dequeue()}),d||M.util.set_user_preference(e,"false")):(t.attr("aria-expanded","true"),r.attr("aria-hidden","false"),r.focus(),n.addClass("drawer-open-"+i),r.removeClass("closed"),d||M.util.set_user_preference(e,"true")),o.publish("nav-drawer-toggle-start",a)},t.prototype.preventPageScroll=function(e){var t=e.wheelDelta||e.originalEvent&&e.originalEvent.wheelDelta||-e.originalEvent.detail,a=0<=this.scrollTop+s(this).outerHeight()-this.scrollHeight,r=this.scrollTop<=0;(t<0&&a||0<t&&r)&&e.preventDefault()},t.prototype.registerEventListeners=function(){s(l.TOGGLE_ACTION).each(function(e,t){a.define(s(t),[a.events.activate]),s(t).on(a.events.activate,function(e,t){this.toggleDrawer(t.originalEvent),t.originalEvent.preventDefault()}.bind(this))}.bind(this)),s(l.SECTION).click(function(){d&&this.closeAll()}.bind(this)),s(l.DRAWER).on("webkitTransitionEnd msTransitionEnd transitionend",function(e){e="false"==s(e.target).closest(l.DRAWER).attr("aria-hidden");o.publish("nav-drawer-toggle-end",e)})},{init:function(){return new t}}});
//# sourceMappingURL=sideright.min.js.map