define(["jquery","core/custom_interaction_events","core/log","core/pubsub"],function(c,a,e,l){function t(){c(r).length||e.debug("Page is missing a drawer region"),c(u).length||e.debug("Page is missing a drawer toggle link"),c(r).each(function(e,t){var a=c(t).find(u),r=a.attr("aria-controls"),n=c(document.getElementById(r)),i="false"==a.attr("aria-expanded"),s=a.attr("data-side"),o=c(g),d=c(p),l=a.attr("data-preference");f&&M.util.set_user_preference(l,"false"),n.on("mousewheel DOMMouseScroll",this.preventPageScroll),i?a.attr("aria-expanded","false"):(o.addClass("drawer-open-"+s),d.addClass("open"),a.attr("aria-expanded","true"))}.bind(this)),this.registerEventListeners(),f&&this.closeAll()}var r='[data-region="drawer-toggle"]',u='[data-action="toggle-drawer"]',g="body",n='.list-group-item[href*="#section-"]',i="#nav-drawer",p="#btn-sidebar",f=c(document).width()<768;return t.prototype.closeAll=function(){c(r).each(function(e,t){var a=c(t).find(u),r=a.attr("data-side"),n=c(g),i=c(p),s=a.attr("aria-controls"),o=c(document.getElementById(s)),d=a.attr("data-preference");a.attr("aria-expanded","false"),n.removeClass("drawer-open-"+r),i.removeClass("open"),o.attr("aria-hidden","true"),o.addClass("closed"),f||M.util.set_user_preference(d,"false")})},t.prototype.toggleDrawer=function(e){var t=c(e.target).closest("[data-action=toggle-drawer]"),a=t.attr("aria-controls"),r=c(document.getElementById(a)),n=c(g),i=c(p),s=t.attr("data-side"),o=t.attr("data-preference");f&&M.util.set_user_preference(o,"false"),n.addClass("drawer-ease");var d="true"==t.attr("aria-expanded");d?(i.removeClass("open"),n.removeClass("drawer-open-"+s),t.attr("aria-expanded","false"),r.addClass("closed").delay(500).queue(function(){c(this).attr("aria-hidden","true").dequeue()}),f||M.util.set_user_preference(o,"false")):(t.attr("aria-expanded","true"),r.attr("aria-hidden","false"),r.focus(),n.addClass("drawer-open-"+s),r.removeClass("closed"),i.addClass("open"),f||M.util.set_user_preference(o,"true")),l.publish("nav-drawer-toggle-start",d)},t.prototype.preventPageScroll=function(e){var t=e.wheelDelta||e.originalEvent&&e.originalEvent.wheelDelta||-e.originalEvent.detail,a=0<=this.scrollTop+c(this).outerHeight()-this.scrollHeight,r=this.scrollTop<=0;(t<0&&a||0<t&&r)&&e.preventDefault()},t.prototype.registerEventListeners=function(){c(u).each(function(e,t){a.define(c(t),[a.events.activate]),c(t).on(a.events.activate,function(e,t){this.toggleDrawer(t.originalEvent),t.originalEvent.preventDefault()}.bind(this))}.bind(this)),c(n).click(function(){f&&this.closeAll()}.bind(this)),c(i).on("webkitTransitionEnd msTransitionEnd transitionend",function(e){var t="false"==c(e.target).closest(i).attr("aria-hidden");l.publish("nav-drawer-toggle-end",t)})},{init:function(){return new t}}});
//# sourceMappingURL=drawer.min.js.map